(window["webpackJsonpPluginwerkl-open-blogware"]=window["webpackJsonpPluginwerkl-open-blogware"]||[]).push([[462],{3577:function(){},2462:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return s}});var n=JSON.parse('{"blog.module.detail":{"werkl_blog_entries":["title","slug","teaser","authorId","publishedAt","blogCategories"]}}');t(7626);let{Component:a}=Shopware,{mapPageErrors:i,mapPropertyErrors:o}=a.getComponentHelper();var s={template:'{% block sw_cms_sidebar_page_settings %}\n<sw-sidebar-item\n    ref="sidebarItem"\n    icon="regular-info-circle"\n    badge-type="error"\n    :title="$tc(\'werkl-blog.detail.sidebar.heading\')"\n    :has-simple-badge="OpenBlogwareDetailError"\n    :disabled="page.locked || disabled"\n>\n    {% block werkl_blog_cms_sidebar_page_basic_information %}\n    <sw-sidebar-collapse :expand-on-loading="true">\n        {% block werkl_blog_cms_sidebar_page_basic_information_header %}\n        <template #header>\n            <span>{{ $tc(\'werkl-blog.detail.sidebar.basicInformation\') }}</span>\n        </template>\n        {% endblock %}\n\n        {% block werkl_blog_cms_sidebar_page_basic_information_form %}\n        <template #content>\n            <div class="sw-cms-sidebar__settings">\n                {% block werkl_blog_cms_sidebar_page_basic_information_title_field %}\n                <sw-text-field\n                    required\n                    name="sw-field--blog-title"\n                    v-model:value="blog.title"\n                    :label="$tc(\'werkl-blog.detail.titleLabel\')"\n                    :placeholder="$tc(\'werkl-blog.detail.titlePlaceholder\')"\n                    :error="blogTitleError"\n                ></sw-text-field>\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_basic_information_slug_field %}\n                <sw-text-field\n                    required\n                    disabled\n                    name="sw-field--blog-slug"\n                    v-model:value="blog.slug"\n                    :label="$tc(\'werkl-blog.detail.slugLabel\')"\n                    :error="blogSlugError"\n                    :placeholder="$tc(\'werkl-blog.detail.slugPlaceholder\')"\n                ></sw-text-field>\n                {% endblock %}\n                <div class="sw-field">\n                    <span class="sw-field__label">URL</span>\n                    <a\n                        :href="`/blog/${blog.slug}`"\n                        target="_blank"\n                        class="werkl-blog-preview"\n                    >\n                        /blog/{{blog.slug}}\n                    </a>\n                </div>\n                {% block werkl_blog_cms_sidebar_page_basic_information_teaser_field %}\n                <sw-textarea-field\n                    type="textarea"\n                    name="sw-field--blog-teaser"\n                    v-model:value="blog.teaser"\n                    :label="$tc(\'werkl-blog.detail.teaserLabel\')"\n                    :placeholder="$tc(\'werkl-blog.detail.teaserPlaceholder\')"\n                    :error="blogTeaserError"\n                ></sw-textarea-field>\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_basic_information_image_field %}\n                <sw-upload-listener\n                    :uploadTag="blog.id"\n                    @media-upload-finish="onSetMediaItem"\n                    autoUpload>\n                </sw-upload-listener>\n\n                <sw-media-compact-upload-v2\n                    variant="regular"\n                    :label="$tc(\'werkl-blog.detail.teaserImageLabel\')"\n                    :source="mediaItem"\n                    :uploadTag="blog.id"\n                    :defaultFolder="blog.getEntityName()"\n                    :allowMultiSelect="false"\n                    :fileAccept="fileAccept"\n                    @media-upload-remove-image="onRemoveMediaItem"\n                    @selection-change="setMedia"\n                    @media-drop="onMediaDropped"\n                ></sw-media-compact-upload-v2>\n                {% endblock %}\n            </div>\n        </template>\n        {% endblock %}\n    </sw-sidebar-collapse>\n    {% endblock %}\n\n    {% block werkl_blog_cms_sidebar_page_settings %}\n    <sw-sidebar-collapse :expand-on-loading="true">\n        {% block werkl_blog_cms_sidebar_page_settings_header %}\n        <template #header>\n            <span>{{ $tc(\'werkl-blog.detail.sidebar.settings\') }}</span>\n        </template>\n        {% endblock %}\n\n        {% block werkl_blog_cms_sidebar_page_settings_form %}\n        <template #content>\n            <div\n                class="sw-cms-sidebar__settings"\n            >\n                <div>\n                    {% block werkl_blog_cms_sidebar_page_settings_visibility_field %}\n                    <sw-switch-field\n                        type="switch"\n                        class="werkl-field--switch"\n                        name="sw-field--blog-active"\n                        :label="$tc(\'werkl-blog.detail.visibility.label\')"\n                        v-model:value="blog.active">\n                    </sw-switch-field>\n                    {% endblock %}\n\n                    {% block werkl_blog_cms_sidebar_page_settings_detail_teaser_field %}\n                    <sw-switch-field\n                        type="switch"\n                        class="werkl-field--switch"\n                        name="sw-field--blog-detailTeaser"\n                        :label="$tc(\'werkl-blog.detail.detailTeaser.label\')"\n                        v-model:value="blog.detailTeaserImage">\n                    </sw-switch-field>\n                    {% endblock %}\n                </div>\n\n                {% block werkl_blog_cms_sidebar_page_settings_published_at_field %}\n                <sw-datepicker\n                    required\n                    dateType="date"\n                    v-model:value="blog.publishedAt"\n                    name="sw-field--blog-publishedAt"\n                    :label="$tc(\'werkl-blog.detail.publishedAtLabel\')"\n                    :error="blogPublishedAtError"\n                ></sw-datepicker>\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_author_field %}\n                <sw-entity-single-select\n                    required\n                    v-model:value="blog.authorId"\n                    name="sw-field--blog-author"\n                    labelProperty="translated.name"\n                    class="werkl-field--author"\n                    entity="werkl_blog_author"\n                    :label="$tc(\'werkl-blog.detail.author.label\')"\n                    :placeholder="$tc(\'werkl-blog.detail.author.placeholder\')"\n                    :error="blogAuthorIdError"\n                >\n                    <template #selection-label-property="{item}">\n                        <span>{{ item.firstName }} {{ item.lastName }} <i>({{ item.email }})</i></span>\n                    </template>\n                    <template #result-label-property="{item}">\n                        <span>{{ item.firstName }} {{ item.lastName }} <i>({{ item.email }})</i></span>\n                    </template>\n                </sw-entity-single-select>\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_sales_channels %}\n                <sw-entity-multi-id-select\n                    v-model:value="blogSalesChannelIds"\n                    :repository="salesChannelRepository"\n                    class="werkl-field--sales-channels"\n                    :label="$tc(\'werkl-blog.detail.salesChannels.labelSalesChannels\')"\n                    :placeholder="$tc(\'werkl-blog.detail.salesChannels.placeholderSalesChannels\')"\n                ></sw-entity-multi-id-select>\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_category_field %}\n                <werkl-blog-category-tree-field\n                    required\n                    v-model:value="blog.blogCategories"\n                    class="werkl-field--category"\n                    name="sw-field--blog-categories"\n                    :label="$tc(\'werkl-blog.detail.category.label\')"\n                    :placeholder="$tc(\'werkl-blog.detail.category.placeholder\')"\n                    :error="blogBlogCategoriesError"\n                    :categoriesCollection="blog.blogCategories"\n                ></werkl-blog-category-tree-field>\n                {% endblock %}\n                {% block werkl_blog_cms_sidebar_page_settings_tags %}\n                <sw-entity-tag-select\n                    v-if="blog && !isLoading"\n                    v-model:entityCollection="blog.tags"\n                    class="sw-blog-detail-base__tags"\n                    :label="$tc(\'werkl-blog.detail.tagsLabel\')"\n                    :placeholder="$tc(\'werkl-blog.detail.tagsPlaceholder\')"\n                />\n                {% endblock %}\n            </div>\n        </template>\n        {% endblock %}\n    </sw-sidebar-collapse>\n    {% endblock %}\n\n    {% block werkl_blog_cms_sidebar_page_serp %}\n    <sw-sidebar-collapse :expand-on-loading="true">\n        {% block werkl_blog_cms_sidebar_page_serp_header %}\n        <template #header>\n            <span>{{ $tc(\'werkl-blog.detail.serp.title\') }}</span>\n        </template>\n        {% endblock %}\n\n        {% block werkl_blog_cms_sidebar_page_serp_form %}\n        <template #content>\n            <div\n                class="sw-cms-sidebar__settings serp-preview-card"\n            >\n                <div class="serp-preview">\n                    <h3>{{ blog.metaTitle }}</h3>\n                    <cite>{{ blog.slug }}</cite>\n                    <p>{{ blog.metaDescription }}</p>\n                </div>\n\n                {% block werkl_blog_cms_sidebar_page_serp_meta_title_field %}\n                <sw-text-field\n                    v-model:value="blog.metaTitle"\n                    :maxlength="maximumMetaTitleCharacter"\n                    name="sw-field--blog-metaTitle"\n                    :placeholder="$tc(\'werkl-blog.detail.serp.metaTitle\')"\n                ></sw-text-field>\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_serp_meta_description_field %}\n                <sw-textarea-field\n                    type="textarea"\n                    v-model:value="blog.metaDescription"\n                    :maxlength="maximumMetaDescriptionCharacter"\n                    name="sw-field--blog-metaDescription"\n                    :placeholder="$tc(\'werkl-blog.detail.serp.metaDescription\')"\n                ></sw-textarea-field>\n                {% endblock %}\n            </div>\n        </template>\n        {% endblock %}\n    </sw-sidebar-collapse>\n    {% endblock %}\n</sw-sidebar-item>\n{% endblock %}\n\n{% block sw_cms_sidebar_layout_assignment %}\n    {% block werkl_blog_cms_sidebar_extension_component %}\n    <werkl-blog-extension-component-sections\n        :position-identifier="positionIdentifierExtension"\n        class="werkl-extension-component"\n    >\n        <template #default="{ componentSection }">\n            <sw-sidebar-item\n                v-if="componentSection"\n                :icon="componentSection.props.icon"\n                badge-type="error"\n                :title="componentSection.props.title"\n                :disabled="page.locked || disabled"\n            >\n                <sw-iframe-renderer\n                    :src="componentSection.src"\n                    :location-id="componentSection.props.locationId"\n                ></sw-iframe-renderer>\n            </sw-sidebar-item>\n        </template>\n    </werkl-blog-extension-component-sections>\n    {% endblock %}\n{% endblock %}\n',inject:["repositoryFactory","systemConfigApiService"],props:{blog:{type:Object,default:()=>({})}},data(){return{fileAccept:"image/*",maximumMetaTitleCharacter:160,maximumMetaDescriptionCharacter:160}},created(){this.createdComponent()},mounted(){this.openBlogDetailSideBar()},computed:{blogSalesChannelIds:{get(){return this.blog.customFields?.salesChannelIds||[]},set(e){let l=null;e&&e.length>0&&(l=e),this.blog.customFields={...this.blog.customFields,salesChannelIds:l}}},salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},mediaRepository(){return this.repositoryFactory.create("media")},tagRepository(){return this.repositoryFactory.create("tag")},positionIdentifierExtension(){return"werkl-cms-sidebar-extension"},mediaItem(){return this.blog&&this.blog.media},...i(n),...o("blog",["title","slug","teaser","authorId","publishedAt","blogCategories"])},methods:{createdComponent(){this.systemConfigApiService.getValues("WerklOpenBlogware.config").then(e=>{this.maximumMetaTitleCharacter=e["WerklOpenBlogware.config.maximumMetaTitleCharacter"],this.maximumMetaDescriptionCharacter=e["WerklOpenBlogware.config.maximumMetaDescriptionCharacter"]})},onSetMediaItem({targetId:e}){return this.mediaRepository.get(e,Shopware.Context.api).then(l=>{this.blog.mediaId=e,this.blog.media=l})},setMedia([e]){this.blog.mediaId=e.id,this.blog.media=e},onRemoveMediaItem(){this.blog.mediaId=null,this.blog.media=null},onMediaDropped(e){this.onSetMediaItem({targetId:e.id})},openBlogDetailSideBar(){this.$nextTick(()=>{this.$refs.sidebarItem&&"function"==typeof this.$refs.sidebarItem.openContent&&this.$refs.sidebarItem.openContent()})}}}},7626:function(e,l,t){var n=t(3577);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,t(534).A)("491026ae",n,!0,{})},534:function(e,l,t){"use strict";function n(e,l){for(var t=[],n={},a=0;a<l.length;a++){var i=l[a],o=i[0],s={id:e+":"+a,css:i[1],media:i[2],sourceMap:i[3]};n[o]?n[o].parts.push(s):t.push(n[o]={id:o,parts:[s]})}return t}t.d(l,{A:function(){return _}});var a,i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},s=i&&(document.head||document.getElementsByTagName("head")[0]),r=null,d=0,c=!1,b=function(){},g=null,p="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function _(e,l,t,a){c=t,g=a||{};var i=n(e,l);return u(i),function(l){for(var t=[],a=0;a<i.length;a++){var s=o[i[a].id];s.refs--,t.push(s)}l?u(i=n(e,l)):i=[];for(var a=0;a<t.length;a++){var s=t[a];if(0===s.refs){for(var r=0;r<s.parts.length;r++)s.parts[r]();delete o[s.id]}}}}function u(e){for(var l=0;l<e.length;l++){var t=e[l],n=o[t.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](t.parts[a]);for(;a<t.parts.length;a++)n.parts.push(h(t.parts[a]));n.parts.length>t.parts.length&&(n.parts.length=t.parts.length)}else{for(var i=[],a=0;a<t.parts.length;a++)i.push(h(t.parts[a]));o[t.id]={id:t.id,refs:1,parts:i}}}}function w(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function h(e){var l,t,n=document.querySelector("style["+p+'~="'+e.id+'"]');if(n){if(c)return b;n.parentNode.removeChild(n)}if(m){var a=d++;l=k.bind(null,n=r||(r=w()),a,!1),t=k.bind(null,n,a,!0)}else l=v.bind(null,n=w()),t=function(){n.parentNode.removeChild(n)};return l(e),function(n){n?(n.css!==e.css||n.media!==e.media||n.sourceMap!==e.sourceMap)&&l(e=n):t()}}var f=(a=[],function(e,l){return a[e]=l,a.filter(Boolean).join("\n")});function k(e,l,t,n){var a=t?"":n.css;if(e.styleSheet)e.styleSheet.cssText=f(l,a);else{var i=document.createTextNode(a),o=e.childNodes;o[l]&&e.removeChild(o[l]),o.length?e.insertBefore(i,o[l]):e.appendChild(i)}}function v(e,l){var t=l.css,n=l.media,a=l.sourceMap;if(n&&e.setAttribute("media",n),g.ssrId&&e.setAttribute(p,l.id),a&&(t+="\n/*# sourceURL="+a.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}}]);